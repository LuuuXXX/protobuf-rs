%% 核心组件图：编码器、解码器、代码生成器等
graph LR
    subgraph "Encoding Pipeline 编码流水线"
        E1[JavaScript Value]
        E2[Type Validation]
        E3[Rust Encoder]
        E4[Varint Encoder]
        E5[Field Tag]
        E6[Buffer Output]
        
        E1 --> E2
        E2 --> E3
        E3 --> E4
        E3 --> E5
        E4 --> E6
        E5 --> E6
    end

    subgraph "Decoding Pipeline 解码流水线"
        D1[Binary Buffer]
        D2[Rust Decoder]
        D3[Varint Decoder]
        D4[Field Parser]
        D5[Type Conversion]
        D6[JavaScript Object]
        
        D1 --> D2
        D2 --> D3
        D2 --> D4
        D3 --> D5
        D4 --> D5
        D5 --> D6
    end

    subgraph "Core Components 核心组件"
        direction TB
        C1[Varint Operations<br/>变长整数编解码]
        C2[ZigZag Encoding<br/>有符号整数优化]
        C3[Field Tag Parser<br/>字段标签解析]
        C4[Reader Class<br/>零拷贝读取器]
        C5[Writer Class<br/>缓冲写入器]
        
        C1 -.使用.-> C2
        C4 -.使用.-> C1
        C4 -.使用.-> C3
        C5 -.使用.-> C1
        C5 -.使用.-> C3
    end

    subgraph "Performance Components 性能组件"
        P1[SIMD Batch<br/>向量化批处理]
        P2[Parallel Processing<br/>并行处理]
        P3[Memory Pool<br/>内存池]
        
        P1 --> P3
        P2 --> P3
    end

    E3 --> C5
    D2 --> C4
    C4 --> P1
    C5 --> P1
    C4 --> P2
    C5 --> P2

    style C1 fill:#90EE90
    style C4 fill:#90EE90
    style C5 fill:#90EE90
    style P1 fill:#FFD700
    style P2 fill:#FFD700
    style P3 fill:#FFD700
