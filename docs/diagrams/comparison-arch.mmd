%% protobuf-rs 与 protobuf.js 架构对比图
graph TB
    subgraph "protobuf-rs Architecture"
        direction TB
        A1[Application Code]
        A2[Hybrid API Layer]
        A3[NAPI Bridge]
        A4[Rust Core<br/>零拷贝 + SIMD]
        A5[原生代码<br/>AOT编译]
        
        A1 --> A2
        A2 --> A3
        A3 --> A4
        A4 --> A5
        
        style A4 fill:#90EE90
        style A5 fill:#90EE90
    end

    subgraph "protobuf.js Architecture"
        direction TB
        B1[Application Code]
        B2[protobuf.js API]
        B3[JavaScript Runtime]
        B4[V8 JIT Compiler]
        B5[解释执行<br/>运行时编译]
        
        B1 --> B2
        B2 --> B3
        B3 --> B4
        B4 --> B5
        
        style B4 fill:#FFB6C1
        style B5 fill:#FFB6C1
    end

    subgraph "Key Differences 关键差异"
        direction LR
        D1["内存管理<br/>Rust: 所有权系统<br/>JS: 垃圾回收"]
        D2["编译方式<br/>Rust: AOT编译<br/>JS: JIT运行时"]
        D3["性能优化<br/>Rust: SIMD + 零拷贝<br/>JS: 运行时优化"]
        D4["类型安全<br/>Rust: 编译时检查<br/>JS: 运行时检查"]
    end

    %% Performance Comparison
    A5 -.3-15x faster.-> B5
    A4 -.42% less memory.-> B3
